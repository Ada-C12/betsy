<main>
  <h2>Cart</h2>

  <% if @order.order_items.empty? %>
    <h4>your cart is empty</h4>
  <% end %>

  <table>
    <h2 id = "order-details"> Order Details </h2>
    <theader>
      <tr class = "table-headers">
        <td>Item</td>
        <td>Quantity</td>
        <td>Price</td>
        <td>Item Subtotal</td>
      </tr>
    </theader>
    <tbody>
      <% @order.order_items.each do |order_item| %>
        <tr>
          <td><%= order_item.product.name %></td>
          <td>
            <%= form_with model: order_item, url: update_cart_path(order_item) do |f| %>
              <%= f.text_field :quantity %>
              <%= f.submit "update" %>
            <% end %>
          </td>
          <td>$<%= Order.formatter order_item.product.price %></td>
          <td>$<%= Order.formatter order_item.total %></td>
          <td><%= link_to "remove", remove_from_cart_path(order_item.id), method: :delete %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <h3 class= "summary"> Total Price: $<%= Order.formatter @order.revenue %> </h3>
  <%= link_to "Purchase", complete_purchase_path(@order.id) %>
</main>
