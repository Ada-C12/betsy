<%= form_with model: @product, class: product_form_class do |f| %>
  <%= f.label :Name %>
  <%= f.text_field :name %>

  <%= f.label :Price %>
  <%= f.text_field :price %>

  <%= f.label :Stock %>
  <%= f.text_field :stock %>

  <%= f.label "Image URL" %>
  <%= f.text_field :img_url %>

  <%= f.label :Description %>
  <%= f.text_field :description %>

  <section>
    <%= f.select(:category_ids, Category.where(category_type: "fruit").map {|cat| [ cat.name, cat.id ] },{ :prompt => "Select Fruits"}, { :multiple => true, :size => 5 }) %>  
  </section>

  <section>
    <%= f.select(:category_ids, Category.where(category_type: "theme").map {|cat| [ cat.name, cat.id ] },{ :prompt => "Select Themes"}, { :multiple => true, :size => 5 }) %>  
  </section>

  <section>
    <%= f.select(:category_ids, Category.where(category_type: "category").map {|cat| [ cat.name, cat.id ] },{ :prompt => "Select Categories"}, { :multiple => true, :size => 5 }) %>  
  </section>

  <section>
    <%= f.select(:category_ids, Category.where(category_type: "color").map {|cat| [ cat.name, cat.id ] },{ :prompt => "Select Colors"}, { :multiple => true, :size => 5 }) %>  
  </section>
                            
  <%= f.submit submit_button_label, class: "product-form-button" %>

<% end %>


<script type="text/javascript">
    $(document).ready(function() {
        $('#example-post-checkboxName').multiselect({
            checkboxName: function(option) {
                var $optgroup = $(option).closest('optgroup');
                if ($optgroup.id == 'example-post-checkboxName-1') {
                    return 'group1[]';
                }
                else {
                    return 'group2[]';
                }
            }
        });
    });
</script>
<form class="form-horizontal" method="POST" action="/products">
    <div class="form-group">
        <label class="col-sm-2 control-label">Multiselect</label>
        <div class="col-sm-10">
            <select id="example-post-checkboxName" name="multiselect[]" multiple="multiple" required>
                <optgroup label="Group 1" id="example-post-checkboxName-1">
                    <option value="1-1">Option 1.1</option>
                    <option value="1-2">Option 1.2</option>
                    <option value="1-3">Option 1.3</option>
                </optgroup>
                <optgroup label="Group 1" id="example-post-checkboxName-2">
                    <option value="2-1">Option 2.1</option>
                    <option value="2-2">Option 2.2</option>
                    <option value="2-3">Option 2.3</option>
                </optgroup>
            </select>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <button type="submit" class="btn btn-default">Submit</button>
        </div>
    </div>
</form>

